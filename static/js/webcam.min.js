window.webcam={version:"1.0.9",ie:!!navigator.userAgent.match(/MSIE/),protocol:location.protocol.match(/https/i)?"https":"http",callback:null,swf_url:"/static/js/webcam.swf",shutter_url:"/static/js/shutter.mp3",api_url:"",loaded:!1,quality:90,shutter_sound:!0,stealth:!1,hooks:{onLoad:null,onComplete:null,onError:null},set_hook:function(t,e){return"undefined"==typeof this.hooks[t]?alert("Hook type not supported: "+t):void(this.hooks[t]=e)},fire_hook:function(t,e){return this.hooks[t]?("function"==typeof this.hooks[t]?this.hooks[t](e):"array"==typeof this.hooks[t]?this.hooks[t][0][this.hooks[t][1]](e):window[this.hooks[t]]&&window[this.hooks[t]](e),!0):!1},set_api_url:function(t){this.api_url=t},set_swf_url:function(t){this.swf_url=t},get_html:function(t,e,o,s){o||(o=t),s||(s=e);var a="",i="shutter_enabled="+(this.shutter_sound?1:0)+"&shutter_url="+escape(this.shutter_url)+"&width="+t+"&height="+e+"&server_width="+o+"&server_height="+s;return a+=this.ie?'<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+this.protocol+'://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+t+'" height="'+e+'" id="webcam_movie" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+this.swf_url+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+i+'"/></object>':'<embed id="webcam_movie" src="'+this.swf_url+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+t+'" height="'+e+'" name="webcam_movie" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+i+'" />',this.loaded=!1,a},get_movie:function(){if(!this.loaded)return alert("ERROR: Movie is not loaded yet");var t=document.getElementById("webcam_movie");return t||alert("ERROR: Cannot locate movie 'webcam_movie' in DOM"),t},set_stealth:function(t){this.stealth=t},snap:function(t,e,o){e&&this.set_hook("onComplete",e),t&&this.set_api_url(t),"undefined"!=typeof o&&this.set_stealth(o),this.get_movie()._snap(this.api_url,this.quality,this.shutter_sound?1:0,this.stealth?1:0)},freeze:function(){this.get_movie()._snap("",this.quality,this.shutter_sound?1:0,0)},upload:function(t,e){e&&this.set_hook("onComplete",e),t&&this.set_api_url(t),this.get_movie()._upload(this.api_url)},reset:function(){this.get_movie()._reset()},configure:function(t){t||(t="camera"),this.get_movie()._configure(t)},set_quality:function(t){this.quality=t},set_shutter_sound:function(t,e){this.shutter_sound=t,this.shutter_url=e?e:"/static/js/shutter.mp3"},flash_notify:function(t,e){switch(t){case"flashLoadComplete":this.loaded=!0,this.fire_hook("onLoad");break;case"error":this.fire_hook("onError",e)||alert("JPEGCam Flash Error: "+e);break;case"success":this.fire_hook("onComplete",e.toString());break;default:alert("jpegcam flash_notify: "+t+": "+e)}}};